<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="Jekyll v4.0.0" /><meta property="og:title" content="How to Boot PopOS with Secure Boot" /><meta name="author" content="Clarence M." /><meta property="og:locale" content="en_US" /><meta name="description" content="This post describes how to boot PopOS or any other Linux distribution with Secure Boot." /><meta property="og:description" content="This post describes how to boot PopOS or any other Linux distribution with Secure Boot." /><link rel="canonical" href="https://cm0.dev/2022/01/06/secure-boot-pop-os" /><meta property="og:url" content="https://cm0.dev/2022/01/06/secure-boot-pop-os" /><meta property="og:site_name" content="Clarence M." /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-01-06T00:00:00+00:00" /> <script type="application/ld+json"> {"url":"https://cm0.dev/2022/01/06/secure-boot-pop-os","author":{"@type":"Person","name":"Clarence M."},"description":"This post describes how to boot PopOS or any other Linux distribution with Secure Boot.","headline":"How to Boot PopOS with Secure Boot","dateModified":"2022-01-06T00:00:00+00:00","datePublished":"2022-01-06T00:00:00+00:00","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://cm0.dev/2022/01/06/secure-boot-pop-os"},"@context":"https://schema.org"}</script><title> How to Boot PopOS with Secure Boot - Clarence M.</title><link rel="shortcut icon" href="/favicon.ico"><link rel="alternate" type="application/atom+xml" title="Clarence M." href="/atom.xml"><link rel="alternate" type="application/json" title="Clarence M." href="https://cm0.dev/feed.json" /><link rel="sitemap" type="application/xml" title="sitemap" href="/sitemap.xml" /><link rel="stylesheet" href="/assets/css/styles.css"><link rel="preconnect" href="//fonts.gstatic.com"><link href="//fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-FRJ10EYV1N"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-FRJ10EYV1N'); </script></head><body><main role="main"><section class="post"> <script src="/assets/js/vanilla-back-to-top.min.js"></script> <script>addBackToTop({ id: 'back-to-top', diameter: 50, })</script><div class="flex-row-between"> <a href="https://cm0.dev/">Â« back</a> <button id="theme-toggle" onclick="modeSwitcher()"><div></div></button></div><div id="page-header"> <time datetime="2022-01-06T00:00:00+00:00">Jan 6, 2022 - </time> <span class="reading-time" title="Estimated read time"> 1 min read </span><h1 class="title"> How to Boot PopOS with Secure Boot</h1><br> <a href="/tag/linux">linux</a>, <a href="/tag/secure-boot">secure-boot</a>, <a href="/tag/popos">popos</a></div><ul id="toc" class="section-nav"><li class="toc-entry toc-h2"><a href="#intro">Intro</a></li><li class="toc-entry toc-h2"><a href="#prerequisites">Prerequisites</a></li><li class="toc-entry toc-h2"><a href="#steps">Steps</a></li><li class="toc-entry toc-h2"><a href="#notes">Notes</a></li></ul><h2 id="intro"> <a class="anchor" href="#intro" aria-hidden="true"><span class="octicon octicon-link"></span></a>Intro <a href="#intro">#</a></h2><hr><p>How to boot PopOS (or any linux distro) with secure boot enabled.</p><h2 id="prerequisites"> <a class="anchor" href="#prerequisites" aria-hidden="true"><span class="octicon octicon-link"></span></a>Prerequisites <a href="#prerequisites">#</a></h2><hr><ul><li>This guide assumes that you have a working PopOS (21.10) installation and secure boot is currently disabled in the UEFI BIOS.</li><li>I also assume you have some experience working through the command line in linux.</li><li>These two files, obtainable <a href="https://blog.hansenpartnership.com/linux-foundation-secure-boot-system-released/">here</a><ul><li><em>Preloader.efi</em></li><li><em>Hashtool.efi</em></li></ul></li></ul><h2 id="steps"> <a class="anchor" href="#steps" aria-hidden="true"><span class="octicon octicon-link"></span></a>Steps <a href="#steps">#</a></h2><hr><ol><li>Open a terminal session and gain root privileges.<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo -i
</code></pre></div></div></li><li>Change directory to <code class="highlighter-rouge">/boot/efi/EFI/systemd</code>.<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd /boot/efi/EFI/systemd
</code></pre></div></div></li><li>Verify that <code class="highlighter-rouge">systemd-bootx64.efi</code> is in this directory.<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$&gt; ls
systemd-bootx64.efi
</code></pre></div></div></li><li>Rename <code class="highlighter-rouge">systemd-bootx64.efi</code> to <code class="highlighter-rouge">loader.efi</code><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mv systemd-bootx64.efi loader.efi
</code></pre></div></div></li><li>Move both <code class="highlighter-rouge">Preloader.efi</code> and <code class="highlighter-rouge">HashTool.efi</code> to <code class="highlighter-rouge">/boot/efi/EFI/systemd</code><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mv Preloader.efi /boot/efi/EFI/systemd
mv HashTool.efi /boot/efi/EFI/systemd
</code></pre></div></div></li><li>Rename <code class="highlighter-rouge">Preloader.efi</code> to <code class="highlighter-rouge">systemd-bootx64.efi</code><div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mv Preloader.efi systemd-bootx64.efi
</code></pre></div></div></li><li>Reboot into BIOS and enable secure boot.</li><li>Reboot again and you should now see this screen: <img src="/assets/images/secure-boot-popos/step8.jpg" alt="bootimg"> Simply select OK to continue.</li><li>Select <em>Enroll Hash</em> <img src="/assets/images/secure-boot-popos/step9.jpg" alt="enrollhash"></li><li>Select <code class="highlighter-rouge">loader.efi</code> and press enter. <img src="/assets/images/secure-boot-popos/step10.jpg" alt="enrollhash1"></li><li>It will ask if you want to <em>Enroll this hash into the MOK database?</em>. Simply select YES. <img src="/assets/images/secure-boot-popos/step11.jpg" alt="enrollhash2"></li><li>It will bring you back to the main menu. Select <em>Enroll Hash</em> again. <img src="/assets/images/secure-boot-popos/step9.jpg" alt="enrollhash"></li><li>Repeat steps 10 and 11 with <code class="highlighter-rouge">vmlinuz.efi</code> which can be found by selecting <code class="highlighter-rouge">../</code> &gt; <code class="highlighter-rouge">Pop_OS-....</code></li><li>Once you have completed the above, reboot the system and it should successfully boot into PopOS with secure boot enabled.</li></ol><h2 id="notes"> <a class="anchor" href="#notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Notes <a href="#notes">#</a></h2><hr><ul><li>Sometimes when updating PopOS, it will modify the .efi files. This will prevent PopOS from booting with secure boot again. To fix this simply re-enroll the hashes again (Steps 9-13) to fix the issue.</li></ul><h2> Comments</h2><hr><div id="giscusContainer"></div><script> let giscusTheme = localStorage.getItem("theme"); let giscusAttributes = { "src": "https://giscus.app/client.js", "data-repo": "mclarence/cm0.dev", "data-repo-id": "R_kgDOHuEPJw", "data-category": "General", "data-category-id": "DIC_kwDOHuEPJ84CQeYP", "data-mapping": "pathname", "data-reactions-enabled": "1", "data-emit-metadata": "0", "data-theme": giscusTheme, "data-lang": "en", "crossorigin": "anonymous", "async": "", }; let giscusScript = document.createElement("script"); Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value)); document.getElementById("giscusContainer").appendChild(giscusScript); </script></section></main><script type="text/javascript"> function sendMessage(message) { const iframe = document.querySelector('iframe.giscus-frame'); if (!iframe) return; console.log("test"); iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app'); } function setTheme(theme) { const giscusIframe = document.querySelector('iframe.giscus-frame'); if (theme === "dark") { document.documentElement.setAttribute('data-theme', 'dark'); window.localStorage.setItem('theme', 'dark'); document.getElementById("theme-toggle").classList.add('sun'); document.getElementById("theme-toggle").classList.remove('moon'); sendMessage({ setConfig: { theme: 'dark', } }); } else { document.documentElement.setAttribute('data-theme', 'light'); window.localStorage.setItem('theme', 'light'); document.getElementById("theme-toggle").classList.add('moon'); document.getElementById("theme-toggle").classList.remove('sun'); sendMessage({ setConfig: { theme: 'light', } }); } const event = new Event('themeChanged'); document.dispatchEvent(event); } let theme = localStorage.getItem('theme'); theme = theme || (window.matchMedia ? window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light' : 'light'); setTheme(theme); function modeSwitcher() { let currentMode = document.documentElement.getAttribute('data-theme'); if (currentMode === "dark") { setTheme('light'); } else { setTheme('dark'); } } </script></body></html>
